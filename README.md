# Spencer Austad Thesis Repository
This includes all the scripts used for processing and analyzing the data for my thesis.
## Requirements
* Python 3.10 or greater
* Java decompiler: jd-cli-1.2.1.jar
    - ```wget https://repo1.maven.org/maven2/com/github/kwart/jd/jd-cli/1.2.1/jd-cli-1.2.1.jar```
* Open JDK 11
    - ```sudo apt install openjdk-11-jdk```
* Protobuf Compiler
    - ```sudo apt install protobuf-compiler``` 
## Notes
* The data used to generate the models is flattened and located in `data_analytics/saved_data/<file_type>_samples.csv`
* These files can be deleted and regenerated through the following import: 
    ```python
    from data_analytics.import_data import ImportData 
    ``` 
    and then calling it using
    ```python
    dataset = ImportData()
    ```
* This allows the dataset to be used flexibly in different ways as needed and so that the dataset is consistently imported in the same way.

## Instructions
1. Install requirements.txt
    - ```pip3 install -r requirements.txt```
1. Live Analysis
    - Place raw data from Any.run into json_data
    - Run parse_data.py
    - Run calc_child_depth.py to patch child depth counts
    - Run add_network_counts.py to patch network counts
2. Static Analysis
    - Optionally run extract_strings.py to cache strings before proceeding (strings will be cached later if not)
    - Run jar_decompile.py to decompile source jar files into java_decompiled (remember to specify source and ensure jd-cli-1.2.1.jar is accessible)
    - Run static_analysis.py to analyze all source files
3. Aggregate Data
    - Data from live runs and static analyses can be combined using the combine_data.py script at the top level directory
4. Patch data
    - Run all patches in the patches directory to make crucial updates to the dataset before proceding into the data analytics
5. Data Analysis
    - Run data_analytics/generate_summary_data.py to generate summary statics on the files. Results will be in exe_summar_stats.csv, jar_summary_stats.csv, file_summary_stats.csv, and yearly_summary_statistics.csv
    - Run data_analytics/machine_learning.py to run all machine learning models 

